<% content_for :add_property do %>
<li class="nav-item mx-2">
    <%= link_to "Ajouter un bien", new_property_path, class: "btn btn-outline-primary"  %>
</li>
<% end %>

<% content_for :dropdown_menu do %>
<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
    <h6 class="dropdown-header">Bienvenue !</h6>
    <div class="dropdown-divider"></div>
    <%= link_to "Mes biens", my_properties_path, class: "dropdown-item" %>

    <%# if user_signed_in? && current_user.role == "Agent immobilier" %>
        <%#= link_to "Mon agence", edit_agency_path(current_user.agency), class: "dropdown-item" %>
    <%# end %>

    <%= link_to "Mon compte", edit_user_registration_path, class: "dropdown-item" %>
    <div class="dropdown-divider"></div>
    <%= link_to "DÃ©connexion", destroy_user_session_path, method: :delete, class: "dropdown-item" %>
</div>
<% end %>

<nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top" style="box-shadow: 0 .25rem .75rem rgba(0, 0, 0, .05);">
    <%= link_to home_page_path, class: "navbar-brand text-uppercase text-dark font-weight-bold" do %>
    <span class="h3 mb-0 font-weight-bold d-flex align-items-baseline">SICO</span>
    <% end %>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav ml-auto mt-2 mt-md-0 d-flex align-items-center">
            <li class="nav-item mx-2 active">
                <%= link_to home_page_path, class: "nav-link" do %>
                Accueil <span class="sr-only">(current)</span>
                <% end %>
            </li>
            <li class="nav-item mx-2 ">
                <%= link_to "Tout les annonces", properties_path, class: "nav-link" %>
            </li>
            <li class="nav-item mx-2 ">
                <%= link_to "Tout les agents", home_page_path, class: "nav-link" %>
            </li>

            <% if user_signed_in? %>
            <li class="nav-item mx-2">
                <%= link_to "Mes biens", my_properties_path, class: "nav-link"  %>
            </li>
            <% end %>

            <% if user_signed_in? %>
            <% if current_user.profile_picture.attached? %>
            <%= yield :add_property %>
            <li class="nav-item dropdown mx-2">
                <%= link_to "", class: "nav-link dropdown-toggle", id: "navbarDropdown", role: "button", "data-toggle" => "dropdown", "aria-haspopup" => "true", "aria-expanded" => "false" do %>
                <%= image_tag url_for(current_user.profile_picture), size: "35", class: "rounded-circle" %>
                <%= current_user.first_name.capitalize + " " + current_user.last_name.upcase if current_user.first_name.present? && current_user.last_name.present? %>
                <% end %>
                <%= yield :dropdown_menu %>
            </li>
            <% else %>
            <%= yield :add_property %>
            <li class="nav-item dropdown mx-2">
                <%= link_to "", class: "nav-link dropdown-toggle", id: "navbarDropdown", role: "button", "data-toggle" => "dropdown", "aria-haspopup" => "true", "aria-expanded" => "false" do %>
                <%= image_tag "148705-essential-collection/svg/user-3.svg", size: "35" %>
                <%= current_user.first_name.capitalize + " " + current_user.last_name.upcase if current_user.first_name.present? && current_user.last_name.present?  %>
                <% end %>
                <%= yield :dropdown_menu %>
            </li>
            <% end %>
            <% else %>
            <%= yield :add_property %>
            <li class="nav-item mx-2">
                <%= link_to "Connexion", new_user_session_path, class: "nav-link" %>
            </li>
            <% end %>
        </ul>
    </div>
</nav>
