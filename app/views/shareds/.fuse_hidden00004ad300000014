<% content_for :add_property do %>
<li class="nav-item mx-1 d-flex align-items.center">
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal"> Ajouter un annonce</button>
</li>
<% end %>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title sr-only">Vous souhaitez ?</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-12">
                        <h1 class="text-center">Vous souhaitez ?</h1>
                        <div class="d-flex flex-column justify-content-between align-items-center">
                            <p>
                                <%= link_to "Louer un bien immobilier", new_property_path(ad_type: "A louer"), class: "btn btn-outline-primary btn-lg" %>
                            </p>
                            <p>
                                <%= link_to "Vendre un bien immobilier", new_property_path(ad_type: "A vendre"),  class: "btn btn-outline-primary btn-lg" %>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<% content_for :dropdown_menu do %>
<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
    <h6 class="dropdown-header">Bienvenue !</h6>
    <div class="dropdown-divider"></div>
    <%= link_to "Mes annonces", my_properties_path, class: "dropdown-item" %>

    <%# if user_signed_in? && current_user.role == "Agent immobilier" %>
    <%#= link_to "Mon agence", edit_agency_path(current_user.agency), class: "dropdown-item" %>
    <%# end %>

    <%= link_to "Mon compte", edit_user_registration_path, class: "dropdown-item" %>
    <div class="dropdown-divider"></div>
    <%= link_to "DÃ©connexion", destroy_user_session_path, method: :delete, class: "dropdown-item" %>
</div>
<% end %>

<nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top shadow">
    <div class="container">
        <%= link_to home_page_path, class: "navbar-brand" do %>
        <span class="h3 text-uppercase font-weight-bold">SICO</span>
        <% end %>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item mx-1 active">
                    <%= link_to home_page_path, class: "nav-link" do %>
                    Accueil <span class="sr-only">(current)</span>
                    <% end %>
                </li>
                <li class="nav-item mx-1">
                    <%= link_to "Toutes les annonces", properties_path, class: "nav-link" %>
                </li>
                <li class="nav-item mx-1 sr-only">
                    <%#= link_to "Tout les agents", home_page_path, class: "nav-link" %>
                </li>

                <% @ad_types.each do |ad_type| %>
                <li class="nav-item mx-1">
                    <%= link_to ad_type, properties_path(ad_type: ad_type), class: "nav-link" %>
                </li>
                <% end %>

                <% if user_signed_in? %>
                <li class="nav-item mx-1">
                    <%= link_to "Mes annonces", my_properties_path, class: "nav-link"  %>
                </li>
                <% end %>

                <!-- <% if user_signed_in? %>
                <% if current_user.profile_picture.attached? %>
                <%= yield :add_property %>
                <li class="nav-item dropdown mx-1">
                <%= link_to "", class: "nav-link dropdown-toggle", id: "navbarDropdown", role: "button", "data-toggle" => "dropdown", "aria-haspopup" => "true", "aria-expanded" => "false" do %>
                <%= image_tag url_for(current_user.profile_picture), size: "30", class: "rounded-circle" %>
                <%= current_user.first_name.capitalize + " " + current_user.last_name.upcase if current_user.first_name.present? && current_user.last_name.present? %>
                <% end %>
                <%= yield :dropdown_menu %>
            </li>
            <% else %>
            <%= yield :add_property %>
            <li class="nav-item dropdown mx-1">
            <%= link_to "", class: "nav-link dropdown-toggle", id: "navbarDropdown", role: "button", "data-toggle" => "dropdown", "aria-haspopup" => "true", "aria-expanded" => "false" do %>
            <%= image_tag "148705-essential-collection/svg/user-3.svg", size: "30" %>
            <%= current_user.first_name.capitalize + " " + current_user.last_name.upcase if current_user.first_name.present? && current_user.last_name.present?  %>
            <% end %>
            <%= yield :dropdown_menu %>
        </li>
        <% end %>
        <% else %>
        <%= yield :add_property %>
        <li class="nav-item mx-1">
        <%= link_to "Connexion", new_user_session_path, class: "btn btn-secondary" %>
    </li>
    <% end %> -->
</ul>
<ul class="navbar-nav ml-auto">
    <% if user_signed_in? %>
    <% if current_user.profile_picture.attached? %>
    <%= yield :add_property %>
    <li class="nav-item dropdown mx-1">
        <%= link_to "", class: "nav-link dropdown-toggle", id: "navbarDropdown", role: "button", "data-toggle" => "dropdown", "aria-haspopup" => "true", "aria-expanded" => "false" do %>
        <%= image_tag url_for(current_user.profile_picture), size: "30", class: "rounded-circle" %>
        <%= current_user.first_name.capitalize + " " + current_user.last_name.upcase if current_user.first_name.present? && current_user.last_name.present? %>
        <% end %>
        <%= yield :dropdown_menu %>
    </li>
    <% else %>
    <%= yield :add_property %>
    <li class="nav-item dropdown mx-1">
        <%= link_to "", class: "nav-link dropdown-toggle", id: "navbarDropdown", role: "button", "data-toggle" => "dropdown", "aria-haspopup" => "true", "aria-expanded" => "false" do %>
        <%= image_tag "148705-essential-collection/svg/user-3.svg", size: "30" %>
        <%= current_user.first_name.capitalize + " " + current_user.last_name.upcase if current_user.first_name.present? && current_user.last_name.present?  %>
        <% end %>
        <%= yield :dropdown_menu %>
    </li>
    <% end %>
    <% else %>
    <%= yield :add_property %>
    <li class="nav-item mx-1">
        <%= link_to "Connexion", new_user_session_path, class: "btn btn-secondary" %>
    </li>
    <% end %>
</ul>
</div>
</div>
</nav>
