<% provide :page_title, @property.title.capitalize %>

<section class="container-fluid py-4" style="background-color: #FAFAFA;">
  <div class="container">
	<div class="row">
	  <div class="col-lg-9">
		<h3 class="font-weight-normal"><%= @property.title.capitalize %>&nbsp; <small class="badge-primary py-1 px-3 text-white h6"><%= @property.ad_type.name %></small></%></%></h3>
		<address>
		  <p class="text-muted"><i class="fas fa-map-marker-alt mr-1"></i>&nbsp; <%= @property.address %>, <%= @property.city %></p>
		</address>
	  </div>
	  <div class="col-lg-3 text-lg-right">
	  	<% if @property.ad_type.name == "A louer" %>
			<p class="h3 text-primary"><%= @property.price %><sup>f</sup></%>/<small>mois</small></sup></p>
			<p class="h4">Surface: <small><%= @property.area %> m<sup>2</sup></small></p>
		<% else %>
			<p class="h3 text-primary"><%= @property.price %> <small>Fcfa</small></sup></p>
			<p class="h4"><small class="font-weight-bold">Surface: <%= @property.area %> m<sup>2</sup></small></p>
		<% end %>
	  </div>
	</div>
  </div>
</section>

<section class="container-fluid">
  <div class="row">
	
  </div>
</section>

<div class="slick_properties_photo">
  <% if @property.property_photos.present? %>
  	<% @property.property_photos.each do |photo| %>
	  <%= image_tag(photo.photo.url, alt: 'Property photos', class: "img-fluid") if photo.present? %>
  	<% end %>
  <% else %>
	<p>ANNONCE SASNS PHOTOs</p>
  <% end %>
</div>

<section class="container py-5">
  <div class="row">
	  <div class="col-lg-8">
		<div class="row">
		  <div class="col-12 my-3">
			  <h4 class="mb-0">Description</h4>
			  <hr>
			  <p> <%= @property.description %></p> 
		  </div>

		  <div class="col-12 my-3">
			<h4 class="mb-0">Details</h4>
			<hr>
			<ul class="nav flex-column">
			<li class="nav-item">
			  <a href="" class="nav-link pl-0 py-1 text-muted">
				<i class="fas fa-map-marker-alt"></i>&nbsp; Cococodji, Bénin
			  </a>
			</li>
			<li class="nav-item">
			  <a href="" class="nav-link pl-0 py-1 text-muted">
				<i class="fas fa-mobile mr-1" aria-hidden="true"></i>&nbsp; 62 20 03 90
			  </a>
			</li>
			<li class="nav-item">
			  <%= mail_to "francel.webdev@gmail.com", subject: "Demande d'information", class: "nav-link pl-0 py-1 text-muted" do %>
				<i class="fas fa-envelope mr-1" aria-hidden="true"></i>&nbsp; francel.webdev@gmail.com
			  <% end %>
			</li>
		  </ul>
		  </div>

		  <div class="col-12 my-3">
			<h4 class="mb-0">Addresse</h4>
			<hr>
		  </div>

		  <div class="col-12 my-3">
			<h4 class="mb-0">Plan</h4>
			<hr>
		  </div>

		  <div class="col-12 my-3">
			<h4 class="mb-0">Vidéo</h4>
			<hr>
		  </div>

		  <div class="col-12 my-3">
			<h4 class="mb-0">Avis</h4>
			<hr>
		  </div>
		</div>
	  </div>
	  <div class="col-lg-4">
		<div class="card">
		  <div class="card-body">
			<div class="row">
			  <div class="col-lg-4">
				<%= image_tag @property.user.profile_photo_url, class: "rounded-circle", size: "80x80" %>
			  </div>
			  <div class="col-lg-8">
				<h5 class="card-text">
					<%= @property.user.first_name %> <%= @property.user.last_name %>
				</h5>
				<p><%= @property.user.phone_number %></p>
			  </div>
			  <div class="col-lg-12 my-3">
				<%= form_with scope: :contact, class: "d-flex flex-column justify-content-center" do |contact| %>

					<%= contact.email_field :email %>
					<%= contact.email_field :email %>
					<%= contact.submit :submit %>

				<% end %>
			  </div>
			</div>
		</div>
	  </div>
  	</div>
  	<div class="col-12">
		<%= link_to 'Retour', properties_path, class: "btn btn-primary" %>
	</div>
  </div>
</section>


<% content_for :slick_properties_photo do %>
  <script>
	  $(document).ready(function(){

		$(".slick_properties_photo").slick({

			dots: true
			speed: 500
			// normal options...
			infinite: false,

			// the magic
			responsive: [{

				breakpoint: 1024,
				settings: {
				  slidesToShow: 3,
				  slidesToScroll: 1,
				  autoplay: true,
				  autoplaySpeed: 2000,
				  dots: true
				  infinite: true
				}

			  }, {

				breakpoint: 600,
				settings: {
				  slidesToShow: 2,
				  slidesToScroll: 1,
				  autoplay: true,
				  autoplaySpeed: 2000,                  
				  dots: true
				}

			  }, {

				breakpoint: 300,
				settings: "unslick" // destroys slick

			  }]
		  });
		 
	  });
  </script>
<% end %>

<% content_for :head do %>
  <meta name="turbolinks-cache-control" content="no-cache">
<% end %>