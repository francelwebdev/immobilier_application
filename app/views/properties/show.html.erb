<% provide :page_title, @property.title.capitalize %>

<section class="container-fluid py-4" style="background-color: #FAFAFA;">
  <div class="container">
	<div class="row">
	  <div class="col-lg-9">
		<h3 class="font-weight-normal"><%= @property.title.capitalize %>&nbsp; <span class="badge badge-secondary py-2"><%= @property.ad_type.name %></span></h3>
		<address>
		  <p><i class="fas fa-map-marker-alt mr-1"></i>&nbsp; <%= @property.address %>, <%= @property.city %></p>
		</address>
	  </div>
	  <div class="col-lg-3">
	  	<% if @property.ad_type.name == "A louer" %>
			<p class="h3 text-primary text-lg-right">
                <%= @property.price %><sup>f</sup></%>/<small>mois</small></sup>
            </p>
		<% else %>
			<p class="h3 text-primary text-lg-right">
                <%= @property.price %> <small>Fcfa</small></sup>
            </p>
		<% end %>
	  </div>
	</div>
  </div>
</section>

<% if @property_photos.present? %>
    <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner" style="height: 50vh;">
            <div class="carousel-item active" >
                <%= image_tag(@property_photos.first.photo.url, alt: 'Property photos', class: "d-block w-100 img-fluid") %>
            </div>
            <% @property_photos.each do |photo| %>
                <div class="carousel-item">
                    <%= image_tag(photo.photo.url, alt: 'Property photos', class: "d-block w-100") %>
                </div>
            <% end %>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
<% else %>
    <p class="text-center">ANNONCE SASNS PHOTOs</p>
<% end %>

<section class="container py-5">
  <div class="row">
	  <div class="col-lg-8">
	  	<div class="card border-0 mb-4" style="background-color: #FAFAFA;">
	  		<div class="card-body">
				<div class="row">
					<div class="col-6 col-lg-3 text-center">
						<h6 class="font-weight-bold">Surface</h6>
						<p><%= @property.area %> m<sup>2</sup></p>
					</div>
					<div class="col-6 col-lg-3 text-center">
						<h6 class="font-weight-bold">Nombres de pièces</h6>
						<p></p>
					</div>
					<div class="col-6 col-lg-3 text-center">
						<h6 class="font-weight-bold">Nombres de pièces</h6>
						<p></p>
					</div>
					<div class="col-6 col-lg-3 text-center">
						<h6 class="font-weight-bold">Nombres de pièces</h6>
						<p></p>
					</div>
				</div>
	  		</div>
		</div>

		<div class="row">
		  <div class="col-12 my-3">
			  <h4 class="mb-0">Description</h4>
			  <hr>
			  <p> <%= @property.description %></p>
		  </div>
		  <div class="col-12 my-3">
			<h4 class="mb-0">Caractéristique</h4>
			<hr>
		  </div>
		  <div class="col-12 my-3">
			<h4 class="mb-0">Addresse</h4>
			<hr>
		  </div>
		  <div class="col-12 my-3">
			<h4 class="mb-0">Plan</h4>
			<hr>
		  </div>
		  <div class="col-12 my-3">
			<h4 class="mb-0">Vidéo</h4>
			<hr>
		  </div>
		</div>
	  </div>
	  <div class="col-lg-4">
		<div class="card border-0" style="box-shadow: 0px 0px 10px 0px rgba(0,0,0,0.1);">
			<div class="card-body pb-0">
				<p class="h5 mb-4 font-weight-bold text-center">Propriétaire du bien</p>
				<div class="row">
				  <div class="col-lg-4">
					<%= image_tag @property.user.profile_photo_url, class: "rounded-circle", size: "80x80" %>
				  </div>
				  <div class="col-lg-8 d-flex flex-column justify-content-center">
					<p class="text-primary m-0">
						<%= @property.user.first_name %> <%= @property.user.last_name %>
					</p>
					<p class="m-0">
						<i class="fas fa-phone mr-1" aria-hidden="true"></i>&nbsp; <%= @property.user.phone_number %>
					</p>
				  </div>
				</div>
			</div>
			<div class="card-body">
				<p>Lui écrire</p>
				<%= simple_form_for :contact do |contact| %>
					<%= contact.input :client_name, label: false, placeholder: "Nom et prénom"  %>
					<%= contact.input :subject, label: false, placeholder: "Sujet"  %>
					<%= contact.input :message, label: false, placeholder: "Message", as: :text, input_html: {rows: 4}  %>
					<%= contact.submit "Envoyer", class: "btn btn-primary" %>

				<% end %>
			</div>
		</div>
		</div>
  	</div>
  	<div class="col-12">
		<%= link_to 'Retour', properties_path, class: "btn btn-primary" %>
	</div>
  </div>
</section>


<% content_for :slick_properties_photo do %>
  <script>
	  $(document).ready(function(){

		$(".slick_properties_photo").slick({

			dots: true
			speed: 500
			// normal options...
			infinite: false,

			// the magic
			responsive: [{

				breakpoint: 1024,
				settings: {
				  slidesToShow: 3,
				  slidesToScroll: 1,
				  autoplay: true,
				  autoplaySpeed: 2000,
				  dots: true
				  infinite: true
				}

			  }, {

				breakpoint: 600,
				settings: {
				  slidesToShow: 2,
				  slidesToScroll: 1,
				  autoplay: true,
				  autoplaySpeed: 2000,
				  dots: true
				}

			  }, {

				breakpoint: 300,
				settings: "unslick" // destroys slick

			  }]
		  });

	  });
  </script>
<% end %>

<% content_for :head do %>
  <meta name="turbolinks-cache-control" content="no-cache">
<% end %>
